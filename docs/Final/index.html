<!-- Reworked from example from Russell GoldenBerg: https://russellgoldenberg.github.io/scrollama/sticky-overlay/ -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>THE EYES OF THE SMITHSONIAN</title>

  <script src="/Users/leekuczewski/Desktop/The_New_School/Repos/Major-Studio-1/docs/Final/app.js"></script>
  <link rel="stylesheet" href="style.css">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

  <!-- Scrollama javaScript -->
  <script src="https://unpkg.com/intersection-observer"></script>
  <script src="https://unpkg.com/scrollama"></script>
  
  <!-- D3 -->
  <script src="https://d3js.org/d3.v5.min.js"></script>

</head>

<body>
    
    <!-- Scrollama Container -->
    <main id="top">

      <!-- Scrollytelling Intro -->
      <section id="intro">
        <div class="container">
          <div class="row">
            <div class="col">
            </div>
            <div class="col-8">
              <p><br></p>
              <h1 style="text-align:center" id="mainTitle">THE EYES OF THE SMITHSONIAN</h1>
              <h4 style="text-align:center">A JOURNEY OF SEEING</h4>
              <p><br></p>
              <p id="mainText">Seeing through the eyes of various collections at the Smithsonian. 
                The following 50 items span 11 different museums and collections at the Smithsonian. 
                Through the objects we get a sense of the breadth of various collecitons, and an appreciation for the objects, fossils, animals, marine life, and artifacts.
                The objects below span thousands of years BCE, to the current day. Using the Smithsonian's <a href="https://www.si.edu/openaccess" id="link">Open Access Portal </a>, we work through the various collections. Enjoy!
                </br></br></br></br></p> 
              <div class="vid">
                  <video width="320" height="240" autoplay loop>
                      <source src="video/eye_gan.mp4" type=video/mp4>
                    </video>
              </div>
            </div>
            <div class="col">
            </div>
          </div>
        </div>
      </section>

      <!-- Main Scrollytelling Section -->
      <section id="scrollytelling">

        <!-- Figure Map text -->
        <figure>
          <!-- This div just helps to center the images -->
          <div style="text-align:center; height:100%; width:100%; overflow:hidden">
            <!-- Individual Images -->
            <img src="Asset133.png" alt="imgV1" width ="55%" id="imgV1" style="opacity:0">
            <img src="Asset134.png" alt="imgV2" width ="55%" id="imgV2" style="opacity:0">
            <img src="Asset135.png" alt="imgV3" width ="55%" id="imgV3" style="opacity:0">
            <img src="Asset136.png" alt="imgV4" width ="55%" id="imgV4" style="opacity:0">
            <img src="Asset137.png" alt="imgV5" width ="55%" id="imgV5" style="opacity:0">
            <img src="Asset138.png" alt="imgV6" width ="55%" id="imgV6" style="opacity:0">
            <img src="Asset139.png" alt="imgV7" width ="55%" id="imgV7" style="opacity:0">
            <img src="Asset140.png" alt="imgV8" width ="55%" id="imgV8" style="opacity:0">
            <img src="Asset141.png" alt="imgV9" width ="55%" id="imgV9" style="opacity:0">
            <img src="Asset142.png" alt="imgV10" width ="55%" id="imgV10" style="opacity:0">
            <img src="Asset143.png" alt="imgV11" width ="55%" id="imgV11" style="opacity:0">
            <img src="Asset144.png" alt="imgV12" width ="55%" id="imgV12" style="opacity:0">
          </div>
        </figure>

        <!-- Each div is a cropped eye from the object -->
        <article>

          <!-- Cropped Eye #1 -->
          <div class="step" data-scrollama-index="0">
            <img src="cropped_images/fsg_F1909.864.png" alt="eye" width ="50%" style="opacity:75">
          </div>
          
          <!-- Cropped Eye #2 -->
          <div class="step" data-scrollama-index="1">
            <img src="cropped_images/SAAM-1929.8.618.3_1.png" alt="eye" width ="50%" style="opacity:75">
          </div>

          <!-- Cropped Eye #3 -->
            <div class="step" data-scrollama-index="2">
                <img src="cropped_images/NMNH-USNMENT00258443_Pangonia_melanopa_ht_face_lateral_screen.png" alt="eye" width ="50%" style="opacity:75">
            </div>

          <!-- Cropped Eye #4 -->
          <div class="step" data-scrollama-index="3">
            <img src="cropped_images/FS-7729_16_screen.png" alt="eye" width ="50%" style="opacity:75">
          </div>

          <!-- Cropped Eye #5 -->
          <div class="step" data-scrollama-index="4">
            <img src="cropped_images/SAAM-1929.8.345_1_screen.png" alt="eye" width ="50%" style="opacity:75">
          </div>

          <!-- Cropped Eye #6 -->
          <div class="step" data-scrollama-index="5">
              <img src="cropped_images/FS-8423_17_screen.png" alt="eye" width ="50%" style="opacity:75">
          </div>
           

          <!-- Cropped Eye #7 -->
          <div class="step" data-scrollama-index="6">
              <img src="cropped_images/NMAAHC-2013_239_14_001_screen.png" alt="eye" width ="50%" style="opacity:75">
          </div>
         
          <!-- Cropped Eye #8 -->
          <div class="step" data-scrollama-index="7">
              <img src="cropped_images/SAAM-1983.31.23_1_screen.png" alt="eye" width ="50%" style="opacity:75">
          </div>

          <!-- Cropped Eye #9 -->
          <div class="step" data-scrollama-index="8">
              <img src="cropped_images/SIA-SIA_000095_B44A_F02_008_screen.png" alt="eye" width ="50%" style="opacity:75">
          </div>

          <!-- Cropped Eye #10 -->
          <div class="step" data-scrollama-index="9">
              <img src="cropped_images/nmnhinvertebratezoology_14917695.png" alt="eye" width ="50%" style="opacity:75">
          </div>

          <!-- Cropped Eye #11 -->
          <div class="step" data-scrollama-index="10">
              <img src="cropped_images/SAAM-1992.66.2_1_screen.png" alt="eye" width ="50%" style="opacity:75">
           </div>

          <!-- Cropped Eye #12 -->
           <div class="step" data-scrollama-index="11">
              <img src="cropped_images/SAAM-1999.27.77_1_screen.png" alt="eye" width ="50%" style="opacity:75">
           </div>
  
        </article>

      </section>

      <section id="outro">
        <p style="text-align : center"></br><a href="#top">To The Top</a></p>

      </section>
    
    </main>


  <!-- Scrollama javaScript -->
  <script src="https://unpkg.com/intersection-observer"></script>
  <script src="https://unpkg.com/scrollama"></script>

  <!-- Scrollytelling JavaScript -->
  <script>

    // Save different parts of the page as D3.js objects. Using d3 for convenience
    var main = d3.select('main')
    var scrollySection = main.select('#scrollytelling');
    var figure = scrollySection.select('figure');
    var article = scrollySection.select('article');
    var steps = scrollySection.selectAll('.step');

    var imgV1 = d3.select('#imgV1');
    var imgV2 = d3.select('#imgV2');
    var imgV3 = d3.select('#imgV3');
    var imgV4= d3.select('#imgV4');
    var imgV5 = d3.select('#imgV5');
    var imgV6 = d3.select('#imgV6');
    var imgV7 = d3.select('#imgV7');
    var imgV8 = d3.select('#imgV8');
    var imgV9 = d3.select('#imgV9');
    var imgV10 = d3.select('#imgV10');
    var imgV11 = d3.select('#imgV11');
    var imgV12 = d3.select('#imgV12');
    
  
  

    // Create a scrollama object.
    var myScrollama = scrollama();

    // These needs to be constants to improve performance on mobile.
    const stepH = Math.floor(window.innerHeight * 2);
    const figureHeight = window.innerHeight * 1;
    const figureMarginTop = (window.innerHeight - figureHeight) / 2;

    // generic window resize listener event
    function handleResize() {
      
      // console.log("handling resize")
      // 1. update height of step elements
      steps.style('height', stepH + 'px');

      figure
        .style('height', figureHeight + 'px')
        .style('top', figureMarginTop + 'px');


      // 3. tell scrollama to update new element dimensions
      myScrollama.resize();

    }

    // scrollama event handler
    function handleStepChange(response) {
      
      switch(response.index) {
        case 0:
          // Set image to first version
          imgV1.style("opacity", "1")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

        case 1:
          // Set image to second version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "1")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

        case 2:
          // Set image to third version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "1")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 3:
          // Set image to 4th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "1")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 4:
          // Set image to 5th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "1")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 5:
          // Set image to 6th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "1")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 6:
          // Set image to 7th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "1")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 7:
          // Set image to 8th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "1")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 8:
          // Set image to 9th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "1")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 9:
          // Set image to 10th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "1")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "0")
          break;

          case 10:
          // Set image to 11th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "1")
          imgV12.style("opacity", "0")
          break;

          case 11:
          // Set image to 12th version
          imgV1.style("opacity", "0")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          imgV9.style("opacity", "0")
          imgV10.style("opacity", "0")
          imgV11.style("opacity", "0")
          imgV12.style("opacity", "1")
          break;

        default:
          // do nothing
      }

      // change the class of the step divs to indicate which step is active
      steps.classed('is-active', function (d, i) {
        return i === response.index;
      })

    }

    function init() {

      // 0. Display first image only once the all sizes are detected
      imgV1.style("opacity", "1")

      // 1. force a resize on load to ensure proper dimensions are sent to scrollama
      handleResize();

      // 2. setup the scroller passing options
      // 		this will also initialize trigger observations
      // 3. bind scrollama event handlers (this can be chained like below)
      myScrollama.setup({
        step: '.step',
        offset: figureHeight * 1.5 + "px",
        // set to true to see debug horizontal line
        debug: true,
      }).onStepEnter(handleStepChange)  
        

      // setup resize event
      window.addEventListener('resize', handleResize);
    }

    // kick things off
    init();
  </script>

</body>

</html>
